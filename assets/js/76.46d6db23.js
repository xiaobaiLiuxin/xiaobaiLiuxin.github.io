(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{627:function(a,s,t){"use strict";t.r(s);var r=t(17),e=Object(r.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引"}},[a._v("#")]),a._v(" ### 索引")]),a._v(" "),t("p",[a._v("索引：是帮助 MySQL 高效获取数据的 "),t("strong",[a._v("排好序的数据结构")])]),a._v(" "),t("h3",{attrs:{id:"为什么使用-b-树"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用-b-树"}},[a._v("#")]),a._v(" 为什么使用 B+ 树")]),a._v(" "),t("p",[a._v("二叉树：当存储递增序列时会出现树右倾斜的情况，查询效率退化成链表")]),a._v(" "),t("p",[a._v("红黑树：二叉平衡树，其高度不可控，会造成大量的 IO 操作")]),a._v(" "),t("p",[a._v("B+树（B树变种）：")]),a._v(" "),t("ol",[t("li",[a._v("非叶子节点不存储 data，只存储索引，可以存放更多的索引")]),a._v(" "),t("li",[a._v("叶子节点包含了索引字段")]),a._v(" "),t("li",[a._v("叶子节点通过指针连接，提高区间访问效率")])]),a._v(" "),t("p",[a._v("B+数每个节点大小为 16KB，以 BigInt 数据类型为例，一个节点可以存储 1170 个索引，也就是说，三层的 B+ 树可以存储 20 万+ 的数据。")]),a._v(" "),t("h3",{attrs:{id:"myisam-存储引擎"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#myisam-存储引擎"}},[a._v("#")]),a._v(" MyISAM 存储引擎")]),a._v(" "),t("ol",[t("li",[a._v("MySQL 使用 .MYI 文件存储索引，使用 .MYD 文件存储数据；")]),a._v(" "),t("li",[a._v("MyISAM 存储引擎索引与数据分离，非叶子节点存放索引，叶子节点存放数据地址。")])]),a._v(" "),t("h3",{attrs:{id:"innodb-存储引擎"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#innodb-存储引擎"}},[a._v("#")]),a._v(" InnoDB 存储引擎")]),a._v(" "),t("ol",[t("li",[a._v("表数据文件本身是按 B+ 数组织的一个索引结构文件；")]),a._v(" "),t("li",[a._v("主键构成的索引称为做 "),t("strong",[a._v("聚集索引")]),a._v("，其叶子节点包含了完整的数据记录；")]),a._v(" "),t("li",[a._v("非主键构成的索引称为 "),t("strong",[a._v("辅助索引")]),a._v("，其叶子节点包含了主键。")]),a._v(" "),t("li",[a._v("数据表必须建立主键。若不建立主键 InnoDB 会自动选择一列唯一索引作为主键，若表中没有建立唯一索引；InnoDB 会自动创建一个隐藏的 rowId字段 作为主键。")]),a._v(" "),t("li",[a._v("推荐使用整形自增主键，整形查询效率比字符串要高，此外自增主键使添加数据操作在节点尾部进行，减小了索引维护代价；")]),a._v(" "),t("li",[a._v("非主键索引结构子节点存储的是主键值，可以有效节省空间，同时保证索引结构的一致性。")])]),a._v(" "),t("h3",{attrs:{id:"hash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[a._v("#")]),a._v(" Hash")]),a._v(" "),t("ol",[t("li",[a._v("对索引的 Key 进行一次 hash 运算定位到数据存储的位置；")]),a._v(" "),t("li",[a._v("很多时候 Hash 索引要比 B+ 数更加高效；")]),a._v(" "),t("li",[a._v("仅能满足 “=”、 “IN”，不支持范围索引；")]),a._v(" "),t("li",[a._v("不可避免出现 hash 冲突问题")])]),a._v(" "),t("h3",{attrs:{id:"索引选择"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#索引选择"}},[a._v("#")]),a._v(" 索引选择")]),a._v(" "),t("p",[a._v("叶子节点使用双向指针是为了实现范围查询")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://rdgmm6gnu.hn-bkt.clouddn.com/images/20220418134651.png",alt:"image-20220418134642976"}})]),a._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" a"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 先走索引查询 a = 5，然后返回 a = 5 之后的数据")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("select")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("table")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("where")]),a._v(" a"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 先走索引查询 a = 5，然后返回 a = 5 之前的数据")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h3",{attrs:{id:"回表查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回表查询"}},[a._v("#")]),a._v(" 回表查询")]),a._v(" "),t("p",[a._v("使用辅助索引进行查询时，需要先查询到对应数据的主键，查询出的主键集合称为回表。")])])}),[],!1,null,null,null);s.default=e.exports}}]);